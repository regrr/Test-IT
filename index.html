<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>NEBULA IT — Консалтинг и разработка</title>
  <meta name="description" content="Цифровые продукты для бизнеса: аналитика, веб‑приложения, интеграции, AI."/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      /* Светлая деловая тема */
      --bg:#f6f7fb; --paper:#ffffff; --ink:#0f172a; --mut:#5b6472; --line:#e6e9f0;
      --acc:#2563eb; --acc2:#0ea5e9; --ok:#16a34a; --warn:#d97706; --err:#dc2626;
      --br:14px;
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
    a{color:var(--acc);text-decoration:none}
    .container{max-width:1240px;margin:0 auto;padding:0 20px}

    /* Splash intro */
    .splash{position:fixed;inset:0;display:grid;place-items:center;background:radial-gradient(800px 400px at 50% 30%,rgba(37,99,235,.05),transparent 60%),#f8faff;z-index:999}
    .splash .logoBig{width:120px;height:120px;border-radius:28px;display:grid;place-items:center;color:#0f172a;background:conic-gradient(from 0deg,#bcd2ff,#b7f1ff,#bcd2ff);box-shadow:0 0 80px rgba(37,99,235,.15) inset, 0 0 32px rgba(14,165,233,.12)}
    .splash .logoBig span{font-weight:800;font-size:42px}
    .splash .ring{position:absolute;width:220px;height:220px;border-radius:999px;border:2px solid #e8eef9;animation:ring 1.8s ease infinite}
    @keyframes ring{0%{transform:scale(.6);opacity:.9}100%{transform:scale(1.15);opacity:0}}
    .splash.hide{animation:fadeOut .8s ease forwards}
    @keyframes fadeOut{to{opacity:0;visibility:hidden}}

    /* Header */
    header{position:sticky;top:0;z-index:100;background:rgba(255,255,255,.8);backdrop-filter:saturate(130%) blur(8px);border-bottom:1px solid var(--line)}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
    .brand{display:flex;align-items:center;gap:10px;font-weight:700}
    .logo{width:36px;height:36px;border-radius:10px;display:grid;place-items:center;background:conic-gradient(from 180deg,#93c5fd,#67e8f9);color:#0f172a;opacity:0;transform:scale(.9);animation:logoIn .8s ease .2s forwards}
    @keyframes logoIn{to{opacity:1;transform:scale(1)}}
    .menu a,.menu button{margin-left:18px;color:var(--mut)}
    .menu a:hover,.menu button:hover{color:var(--ink)}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border:1px solid var(--line);border-radius:10px;background:#fff;color:var(--ink);cursor:pointer}
    .btn.primary{background:linear-gradient(135deg,var(--acc),var(--acc2));border:none;color:#fff}
    .btn.ghost{background:transparent}

    /* Section base */
    .section{padding:72px 0}
    .paper{background:var(--paper);border:1px solid var(--line);border-radius:var(--br);padding:20px}
    h1{font-size:52px;line-height:1.05;margin:14px 0 6px}
    h2{font-size:32px;margin:0 0 8px}
    .mut{color:var(--mut)}

    /* Hero grid */
    .hero{padding:84px 0 32px}
    .grid-hero{display:grid;grid-template-columns:1.1fr .9fr;gap:28px;align-items:center}
    .kicker{display:inline-flex;gap:8px;align-items:center;padding:6px 10px;border:1px solid var(--line);border-radius:999px;color:var(--mut)}
    .codecard{border:1px solid var(--line);background:linear-gradient(180deg,#ffffff,#f9fbff);border-radius:12px;padding:16px;font-family:"JetBrains Mono",monospace;font-size:13.5px;position:relative}
    .cursor{display:inline-block;width:10px;background:#3b82f6;animation:blink 1.2s infinite}
    @keyframes blink{0%,49%{opacity:1}50%,100%{opacity:0}}

    /* Cards */
    .cards{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
    .card{background:#fff;border:1px solid var(--line);border-radius:12px;padding:16px;transition:transform .25s, box-shadow .25s}
    .card:hover{transform:translateY(-3px);box-shadow:0 12px 28px rgba(10,18,40,.06)}

    /* Cases */
    .cases{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
    .shot{border-radius:12px;overflow:hidden;border:1px solid var(--line);position:relative;background:#fff}
    .shot img{width:100%;height:220px;object-fit:cover;display:block;filter:saturate(.95)}
    .tag{position:absolute;left:10px;top:10px;padding:6px 10px;border-radius:999px;background:rgba(255,255,255,.9);font-size:12px;border:1px solid var(--line)}

    /* FAQ */
    .faq{display:grid;gap:10px}
    .faq details{border:1px solid var(--line);border-radius:10px;padding:12px;background:#fff}
    .faq summary{cursor:pointer;font-weight:600}

    /* Partners */
    .partners{display:grid;grid-template-columns:repeat(6,1fr);gap:12px}
    .partner{border:1px solid var(--line);background:#fff;border-radius:10px;padding:14px;display:grid;place-items:center}

    /* Docs */
    .docs{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    .doc{border:1px solid var(--line);background:#fff;border-radius:10px;padding:14px}

    /* Charts (SVG) */
    .charts{display:grid;grid-template-columns:2fr 1fr;gap:16px}
    .chart{background:#fff;border:1px solid var(--line);border-radius:12px;padding:12px}

    /* Stats */
    .stats{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
    .stat{background:#fff;border:1px solid var(--line);border-radius:12px;padding:16px;text-align:center}
    .stat strong{display:block;font-size:30px}

    /* CTA */
    .cta{background:linear-gradient(135deg,#eef4ff,#e6fbff);border:1px solid var(--line);border-radius:12px;padding:18px;display:grid;grid-template-columns:1fr auto;gap:14px;align-items:center}

    /* Footer */
    footer{padding:28px 0;color:var(--mut);border-top:1px solid var(--line)}

    /* Reveal */
    .reveal{opacity:0;transform:translateY(14px);transition:opacity .6s ease, transform .6s ease}
    .reveal.show{opacity:1;transform:none}

    @media (max-width:1100px){
      .grid-hero{grid-template-columns:1fr}
      .cards,.cases,.partners,.docs,.charts,.stats{grid-template-columns:1fr 1fr}
      .cta{grid-template-columns:1fr}
    }
    @media (max-width:640px){
      h1{font-size:38px}
      .cards,.cases,.partners,.docs,.charts,.stats{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <!-- Splash intro -->
  <div class="splash" id="splash" aria-hidden="true">
    <div class="logoBig"><span>✦</span></div>
    <div class="ring"></div>
  </div>

  <header>
    <div class="container nav">
      <div class="brand"><div class="logo">✦</div> NEBULA IT</div>
      <nav class="menu" aria-label="Главное меню">
        <a href="#hero">Главная</a>
        <a href="#services">Услуги</a>
        <a href="#cases">Проекты</a>
        <a href="#charts">Аналитика</a>
        <a href="#docs">Документация</a>
        <a href="#faq">FAQ</a>
        <button class="btn ghost" id="btnRequisites">Реквизиты</button>
        <button class="btn primary" id="btnContact">Связаться</button>
      </nav>
    </div>
  </header>

  <main>
    <!-- HERO -->
    <section id="hero" class="hero">
      <div class="container grid-hero">
        <div>
          <span class="kicker">Консалтинг · Веб · Интеграции · AI</span>
          <h1 class="reveal">Делаем цифровые продукты, которые решают задачи бизнеса</h1>
          <p class="mut reveal" style="transition-delay:.07s">От аудита и прототипа до продакшена и SLA. Ставим KPI, считаем экономический эффект, показываем прогресс каждую неделю.</p>
          <div style="display:flex;gap:10px;margin-top:12px" class="reveal" style="transition-delay:.12s">
            <button class="btn primary" id="btnBrief">Заполнить бриф</button>
            <a class="btn" href="#services">Смотреть услуги</a>
          </div>
        </div>
        <div class="codecard reveal" style="transition-delay:.1s">
<pre><code>// product.yaml
name: nebula-analytics
stack: nextjs + fastapi + pg + redis
ci: lint → test → build → deploy(vercel)
slo: uptime &gt;= 99.5%, p95 &lt; 300ms
ai:  assistants(rag,tool-use)
<span class="cursor"> </span></code></pre>
        </div>
      </div>
    </section>

    <!-- SERVICES -->
    <section id="services" class="section">
      <div class="container">
        <div class="paper reveal">
          <h2>Услуги</h2>
          <p class="mut">Комплект закрывает весь цикл: стратегия → дизайн → разработка → данные → поддержка.</p>
          <div class="cards" style="margin-top:12px">
            <article class="card"><h3>Аналитика и аудит</h3><p class="mut">Интервью, требования, KPI, риски, дорожная карта.</p></article>
            <article class="card"><h3>Продуктовая разработка</h3><p class="mut">UX/UI, фронтенд, API, CI/CD, observability.</p></article>
            <article class="card"><h3>AI‑внедрение</h3><p class="mut">RAG, ассистенты, приватность, политика данных.</p></article>
            <article class="card"><h3>Интеграции</h3><p class="mut">CRM/ERP, шины данных, ETL, очереди, вебхуки.</p></article>
            <article class="card"><h3>Данные и отчётность</h3><p class="mut">Хранилище, витрины, дашборды, метрики бизнеса.</p></article>
            <article class="card"><h3>SLA‑поддержка</h3><p class="mut">8×5/24×7, RTO/RPO, мониторинг, инциденты.</p></article>
          </div>
        </div>
      </div>
    </section>

    <!-- CASES / PROJECTS -->
    <section id="cases" class="section">
      <div class="container">
        <div class="paper reveal">
          <h2>Проекты</h2>
          <div class="cases" style="margin-top:10px">
            <div class="shot"><span class="tag">FinTech</span><img src="https://images.unsplash.com/photo-1559090336-9f6ab1ad61f9?q=80&w=1400&auto=format&fit=crop" alt="Кейс 1"></div>
            <div class="shot"><span class="tag">E‑comm</span><img src="https://images.unsplash.com/photo-1522071820081-009f0129c71c?q=80&w=1400&auto=format&fit=crop" alt="Кейс 2"></div>
            <div class="shot"><span class="tag">AI Ops</span><img src="https://images.unsplash.com/photo-1518770660439-4636190af475?q=80&w=1400&auto=format&fit=crop" alt="Кейс 3"></div>
          </div>
          <div class="stats" style="margin-top:14px">
            <div class="stat"><strong data-counter="42">0</strong><span class="mut">запусков</span></div>
            <div class="stat"><strong data-counter="18">0</strong><span class="mut">AI‑кейсов</span></div>
            <div class="stat"><strong data-counter="9">0</strong><span class="mut">лет опыта</span></div>
            <div class="stat"><strong data-counter="99">0</strong><span class="mut">% SLA</span></div>
          </div>
        </div>
      </div>
    </section>

    <!-- ANALYTICS / CHARTS -->
    <section id="charts" class="section">
      <div class="container">
        <div class="paper reveal">
          <h2>Аналитика</h2>
          <p class="mut">Живые диаграммы без библиотек. Сдвигайте ползунки — графики обновятся.</p>
          <div class="charts" style="margin-top:10px">
            <!-- Line chart -->
            <div class="chart">
              <svg id="lineChart" viewBox="0 0 600 260" width="100%" height="260" role="img" aria-label="Линейный график">
                <rect x="0" y="0" width="600" height="260" fill="#ffffff" rx="10" ry="10" stroke="var(--line)"/>
                <g id="grid" stroke="#eef2f7">
                  <line x1="40" x2="560" y1="40" y2="40"/>
                  <line x1="40" x2="560" y1="90" y2="90"/>
                  <line x1="40" x2="560" y1="140" y2="140"/>
                  <line x1="40" x2="560" y1="190" y2="190"/>
                </g>
                <polyline id="poly" fill="none" stroke="url(#grad)" stroke-width="3" points=""/>
                <defs>
                  <linearGradient id="grad" x1="0" y1="0" x2="1" y2="0">
                    <stop offset="0%" stop-color="#2563eb"/>
                    <stop offset="100%" stop-color="#0ea5e9"/>
                  </linearGradient>
                </defs>
              </svg>
              <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;margin-top:8px">
                <label>Рост A: <input id="a" type="range" min="0" max="100" value="30"></label>
                <label>Рост B: <input id="b" type="range" min="0" max="100" value="60"></label>
                <label>Рост C: <input id="c" type="range" min="0" max="100" value="80"></label>
              </div>
            </div>
            <!-- Bar chart -->
            <div class="chart">
              <svg id="barChart" viewBox="0 0 300 260" width="100%" height="260" role="img" aria-label="Столбчатая диаграмма">
                <rect x="0" y="0" width="300" height="260" fill="#ffffff" rx="10" ry="10" stroke="var(--line)"/>
                <g id="bars"></g>
              </svg>
              <div style="display:grid;gap:8px;margin-top:8px">
                <label>Продажи Q1–Q4: <input id="barsInput" type="range" min="0" max="100" value="50"></label>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- PARTNERS -->
    <section class="section">
      <div class="container">
        <div class="paper reveal">
          <h2>Партнёры</h2>
          <div class="partners" style="margin-top:10px">
            <div class="partner"><svg width="80" height="22"><rect width="80" height="22" rx="4" fill="#e8eef9"/></svg></div>
            <div class="partner"><svg width="80" height="22"><rect width="80" height="22" rx="4" fill="#e8eef9"/></svg></div>
            <div class="partner"><svg width="80" height="22"><rect width="80" height="22" rx="4" fill="#e8eef9"/></svg></div>
            <div class="partner"><svg width="80" height="22"><rect width="80" height="22" rx="4" fill="#e8eef9"/></svg></div>
            <div class="partner"><svg width="80" height="22"><rect width="80" height="22" rx="4" fill="#e8eef9"/></svg></div>
            <div class="partner"><svg width="80" height="22"><rect width="80" height="22" rx="4" fill="#e8eef9"/></svg></div>
          </div>
        </div>
      </div>
    </section>

    <!-- DOCS -->
    <section id="docs" class="section">
      <div class="container">
        <div class="paper reveal">
          <h2>Документация</h2>
          <div class="docs" style="margin-top:10px">
            <div class="doc"><h3>API</h3><p class="mut">REST + Webhook. Авторизация OAuth2. Лимиты: 600 rpm.</p><button class="btn" id="btnApi">Показать пример</button></div>
            <div class="doc"><h3>Инфраструктура</h3><p class="mut">Vercel фронт, FastAPI бэкенд, PostgreSQL, Redis. Мониторинг и логи.</p><button class="btn" id="btnInfra">Диаграмма</button></div>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ -->
    <section id="faq" class="section">
      <div class="container">
        <div class="paper reveal">
          <h2>FAQ</h2>
          <div class="faq" style="margin-top:10px">
            <details><summary>Сколько длится запуск MVP?</summary><p class="mut">Обычно 4–8 недель при готовом контенте и согласовании.</p></details>
            <details><summary>Как считаете ROI?</summary><p class="mut">Определяем целевые метрики, строим воронки, считаем инкремент.</p></details>
            <details><summary>Работаете по ТЗ заказчика?</summary><p class="mut">Да. Также можем оформить требования и прототип сами.</p></details>
          </div>
          <div class="cta" style="margin-top:14px">
            <div><strong>Нужна консультация?</strong><div class="mut">Оставьте контакты, пришлём чек‑лист на 1 страницу.</div></div>
            <button class="btn primary" id="btnOpenBrief2">Оставить заявку</button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer id="contact">
    <div class="container" style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
      <div>© <span id="year"></span> NEBULA IT</div>
      <div class="mut">Москва · hello@example.com · t.me/nebula_it</div>
      <div style="display:flex;gap:8px">
        <a class="btn" href="#">Telegram</a>
        <a class="btn" href="#">GitHub</a>
        <a class="btn" href="#">LinkedIn</a>
      </div>
    </div>
  </footer>

  <!-- MODALS -->
  <div class="modal" id="modalBrief" style="position:fixed;inset:0;display:none;place-items:center;background:rgba(15,23,42,.35);z-index:200">
    <div class="paper" style="width:min(760px,92vw)">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:10px">
        <h3 style="margin:0">Заявка на консультацию</h3>
        <button class="btn" id="btnCloseBrief">Закрыть</button>
      </div>
      <p class="mut" style="margin:8px 0 12px">Мы ответим в рабочее время.</p>
      <form id="briefForm" style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
        <input name="name" placeholder="Имя" required aria-label="Имя"/>
        <input name="email" type="email" placeholder="Email" required aria-label="Email"/>
        <input name="company" placeholder="Компания" aria-label="Компания"/>
        <input name="phone" placeholder="Телефон" aria-label="Телефон"/>
        <textarea name="goal" placeholder="Коротко о задаче" style="grid-column:1/-1;min-height:96px"></textarea>
        <div style="display:flex;gap:10px;grid-column:1/-1">
          <button class="btn primary" type="submit">Отправить</button>
          <span id="formMsg" class="mut"></span>
        </div>
      </form>
    </div>
  </div>

  <div class="modal" id="modalReq" style="position:fixed;inset:0;display:none;place-items:center;background:rgba(15,23,42,.35);z-index:200">
    <div class="paper" style="width:min(640px,92vw)">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:10px">
        <h3 style="margin:0">Реквизиты (пример)</h3>
        <button class="btn" id="btnCloseReq">Закрыть</button>
      </div>
      <div style="display:grid;gap:6px;margin-top:8px">
        <div><strong>ООО «Небула Тех»</strong></div>
        <div class="mut">ИНН 7723456789 · КПП 770301001 · ОГРН 1234567890123</div>
        <div class="mut">Банк: ПАО «ТехБанк» · БИК 044525225</div>
        <div class="mut">р/с 40702810900000123456 · к/с 30101810400000000225</div>
        <div class="mut">Юр. адрес: 125000, г. Москва, ул. Пример, д. 1</div>
      </div>
    </div>
  </div>

  <div class="modal" id="modalApi" style="position:fixed;inset:0;display:none;place-items:center;background:rgba(15,23,42,.35);z-index:200">
    <div class="paper" style="width:min(760px,92vw)">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:10px"><h3 style="margin:0">API пример</h3><button class="btn" id="btnCloseApi">Закрыть</button></div>
      <pre class="paper" style="overflow:auto;max-height:320px"><code>POST /v1/lead
{
  "name":"Иван",
  "email":"ivan@example.com",
  "goal":"MVP e‑commerce"
}
// 201 Created → id: "ld_01HX"
</code></pre>
    </div>
  </div>

  <div class="modal" id="modalInfra" style="position:fixed;inset:0;display:none;place-items:center;background:rgba(15,23,42,.35);z-index:200">
    <div class="paper" style="width:min(760px,92vw)">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:10px"><h3 style="margin:0">Диаграмма инфраструктуры</h3><button class="btn" id="btnCloseInfra">Закрыть</button></div>
      <svg viewBox="0 0 720 300" width="100%" height="300" aria-label="Диаграмма">
        <rect x="20" y="40" width="200" height="80" rx="10" fill="#eef4ff" stroke="var(--line)"/>
        <text x="120" y="85" text-anchor="middle" font-size="14">Frontend · Vercel</text>
        <rect x="260" y="40" width="200" height="80" rx="10" fill="#e6fbff" stroke="var(--line)"/>
        <text x="360" y="85" text-anchor="middle" font-size="14">API · FastAPI</text>
        <rect x="500" y="40" width="200" height="80" rx="10" fill="#fff" stroke="var(--line)"/>
        <text x="600" y="85" text-anchor="middle" font-size="14">Workers · Queue</text>
        <rect x="260" y="170" width="200" height="80" rx="10" fill="#fff" stroke="var(--line)"/>
        <text x="360" y="215" text-anchor="middle" font-size="14">DB · PostgreSQL</text>
        <rect x="500" y="170" width="200" height="80" rx="10" fill="#fff" stroke="var(--line)"/>
        <text x="600" y="215" text-anchor="middle" font-size="14">Cache · Redis</text>
        <line x1="220" y1="80" x2="260" y2="80" stroke="#cbd5e1"/>
        <line x1="460" y1="80" x2="500" y2="80" stroke="#cbd5e1"/>
        <line x1="360" y1="120" x2="360" y2="170" stroke="#cbd5e1"/>
        <line x1="600" y1="120" x2="600" y2="170" stroke="#cbd5e1"/>
      </svg>
    </div>
  </div>

  <script>
    // Splash
    const splash = document.getElementById('splash');
    setTimeout(()=>{ splash.classList.add('hide'); setTimeout(()=>splash.remove(), 900); }, 1200);

    // Year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Reveal on scroll
    const io = new IntersectionObserver((entries)=>{ entries.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('show'); io.unobserve(e.target); } }) }, {threshold:.15});
    document.querySelectorAll('.reveal, .paper, .card, .shot, .stat, .doc, .partner').forEach(n=>io.observe(n));

    // Counters
    const counters = document.querySelectorAll('[data-counter]');
    const io2 = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        if(!e.isIntersecting) return; const el=e.target; const to=+el.dataset.counter; let v=0; const dur=1200; const t0=performance.now();
        function tick(t){ const p=Math.min(1,(t-t0)/dur); v=Math.floor(p*to); el.textContent=v; if(p<1) requestAnimationFrame(tick); }
        requestAnimationFrame(tick); io2.unobserve(el);
      })
    },{threshold:.4});
    counters.forEach(el=>io2.observe(el));

    // Modals open/close
    const modal = (id)=>document.getElementById(id);
    const open = (m)=>{ m.style.display='grid'; };
    const close= (m)=>{ m.style.display='none'; };

    document.getElementById('btnBrief')?.addEventListener('click', ()=>open(modal('modalBrief')));
    document.getElementById('btnOpenBrief2')?.addEventListener('click', ()=>open(modal('modalBrief')));
    document.getElementById('btnContact')?.addEventListener('click', ()=>open(modal('modalBrief')));
    document.getElementById('btnRequisites')?.addEventListener('click', ()=>open(modal('modalReq')));
    document.getElementById('btnApi')?.addEventListener('click', ()=>open(modal('modalApi')));
    document.getElementById('btnInfra')?.addEventListener('click', ()=>open(modal('modalInfra')));

    document.getElementById('btnCloseBrief')?.addEventListener('click', ()=>close(modal('modalBrief')));
    document.getElementById('btnCloseReq')?.addEventListener('click', ()=>close(modal('modalReq')));
    document.getElementById('btnCloseApi')?.addEventListener('click', ()=>close(modal('modalApi')));
    document.getElementById('btnCloseInfra')?.addEventListener('click', ()=>close(modal('modalInfra')));

    window.addEventListener('keydown', (e)=>{ if(e.key==='Escape'){ ['modalBrief','modalReq','modalApi','modalInfra'].forEach(id=>close(modal(id))); }});
    ['modalBrief','modalReq','modalApi','modalInfra'].forEach(id=>{
      const m = modal(id); m.addEventListener('click', e=>{ if(e.target===m) close(m); });
    });

    // Brief fake submit
    const form = document.getElementById('briefForm');
    const msg  = document.getElementById('formMsg');
    form?.addEventListener('submit', async (e)=>{
      e.preventDefault();
      const data = Object.fromEntries(new FormData(form).entries());
      msg.textContent = 'Отправка…';
      await new Promise(r=>setTimeout(r,700));
      console.log('BRIEF', data);
      msg.textContent = 'Готово. Мы свяжемся в течение рабочего дня.';
      form.reset();
    });

    // Charts logic
    const line = document.getElementById('poly');
    const a = document.getElementById('a');
    const b = document.getElementById('b');
    const c = document.getElementById('c');
    function drawLine(){
      const pts = [20, a.value, 40, b.value, 60, c.value, 80, ( +a.value + +b.value + +c.value )/3];
      const xy = pts.map((v,i)=> i%2===0 ? 40+v*6.5 : 200 - v*1.5 );
      line.setAttribute('points', `${xy[0]},${xy[1]} ${xy[2]},${xy[3]} ${xy[4]},${xy[5]} ${xy[6]},${xy[7]}`);
    }
    [a,b,c].forEach(i=> i?.addEventListener('input', drawLine));
    drawLine();

    const barsG = document.getElementById('bars');
    const barsInput = document.getElementById('barsInput');
    function drawBars(){
      const base = +barsInput.value; barsG.innerHTML=''; const xs=[40,100,160,220];
      xs.forEach((x,idx)=>{ const h = base + idx*10; const y = 220 - h*1.4; const color = idx%2? '#0ea5e9':'#2563eb';
        const r = document.createElementNS('http://www.w3.org/2000/svg','rect');
        r.setAttribute('x', x); r.setAttribute('y', y); r.setAttribute('width', 32); r.setAttribute('height', 220-y); r.setAttribute('rx', 6); r.setAttribute('fill', color);
        r.setAttribute('opacity','0.9'); barsG.appendChild(r);
      });
    }
    barsInput?.addEventListener('input', drawBars); drawBars();
  </script>
</body>
</html>
