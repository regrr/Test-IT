<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
  <title>NEBULA IT — AI, веб и интеграции</title>
  <meta name="description" content="Чат-боты, мини-приложения и веб-сервисы с измеримым эффектом. Интеграции, аналитика, SLA."/>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet"/>
  <style>
    :root{
      --bg:#F5F7FB; --paper:#FFFFFF; --ink:#0F172A; --mut:#5B6472; --line:#E6E9F0;
      --acc:#2563EB; --acc2:#0EA5E9; --ok:#16A34A; --warn:#D97706; --err:#DC2626;
      --r-xs:8px; --r-sm:10px; --r-md:12px; --r-lg:14px; --shadow:0 12px 28px rgba(10,18,40,.06);
      --container:1200px;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;scroll-behavior:smooth}
    /* Fullpage slides */
    main{scroll-snap-type:y mandatory}
    section{min-height:100svh;scroll-snap-align:start;display:flex;align-items:center;padding:72px 0}
    .container{max-width:var(--container);margin:0 auto;padding:0 20px}
    /* Header */
    header{position:sticky;top:0;z-index:1000;background:#fff;backdrop-filter:saturate(125%) blur(8px);border-bottom:1px solid var(--line)}
    .nav{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px 0}
    .brand{display:flex;align-items:center;gap:10px;font-weight:700}
    .brand svg{flex:0 0 32px}
    .menu{display:flex;flex-wrap:wrap;gap:8px}
    .menu a{padding:8px 10px;border-radius:10px;color:var(--mut);font-weight:600;transition:.2s}
    .menu a:hover{color:var(--acc);background:rgba(37,99,235,.08)}
    .menu a.active{color:var(--acc);background:rgba(37,99,235,.14)}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:12px 18px;border-radius:12px;font-weight:700;border:1px solid var(--line);background:#fff;cursor:pointer;transition:.2s}
    .btn:focus-visible{outline:3px solid rgba(37,99,235,.4);outline-offset:2px}
    .btn.primary{background:linear-gradient(135deg,var(--acc),var(--acc2));border:none;color:#fff;box-shadow:0 10px 24px rgba(37,99,235,.25)}
    .btn.outline{border:2px solid var(--acc);color:var(--acc);background:#fff}
    .btn.secondary{background:#0F172A;color:#fff;border-color:#0F172A}
    /* Typography */
    h1{font-size:clamp(28px,5vw,52px);line-height:1.15;margin:8px 0 10px}
    h2{font-size:clamp(22px,3.6vw,36px);margin:0 0 8px}
    h3{font-size:clamp(18px,2.2vw,22px);margin:8px 0}
    p{line-height:1.6;color:var(--ink)}
    .mut{color:var(--mut)}
    .kicker{display:inline-flex;gap:8px;align-items:center;padding:6px 10px;border:1px solid var(--line);border-radius:999px;color:var(--mut);background:#fff}
    /* Blocks */
    .paper{background:var(--paper);border:1px solid var(--line);border-radius:var(--r-lg);padding:22px;box-shadow:0 0 0 rgba(0,0,0,0)}
    .grid-hero{display:grid;grid-template-columns:1.05fr .95fr;gap:24px;align-items:center}
    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
    .grid-4{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}
    .card{background:#fff;border:1px solid var(--line);border-radius:12px;padding:16px;transition:transform .22s, box-shadow .22s}
    .card:hover{transform:translateY(-3px);box-shadow:var(--shadow)}
    .tag{display:inline-block;padding:4px 8px;border:1px solid var(--line);border-radius:999px;background:#fff;font-size:12px;color:var(--mut)}
    .code{font-family:"JetBrains Mono",monospace;font-size:13px;background:linear-gradient(#fff,#f8fbff);border:1px solid var(--line);border-radius:12px;padding:14px;overflow:auto}
    .cursor{display:inline-block;width:10px;background:#2563eb;animation:blink 1.1s infinite}
    @keyframes blink{0%,49%{opacity:1}50%,100%{opacity:0}}
    /* Cases */
    .shots{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
    .shot{position:relative;border:1px solid var(--line);border-radius:12px;overflow:hidden;background:#fff}
    .shot img{width:100%;height:260px;object-fit:cover;display:block}
    .shot .lbl{position:absolute;left:10px;top:10px}
    /* Partners */
    .partners{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:14px}
    .partner{border:1px solid var(--line);border-radius:12px;background:#fff;min-height:88px;display:grid;place-items:center}
    .partner svg,.partner img{max-width:130px;max-height:28px;filter:grayscale(100%);opacity:.85;transition:.2s}
    .partner:hover svg,.partner:hover img{filter:none;opacity:1}
    /* Charts */
    .charts{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    .chart{background:#fff;border:1px solid var(--line);border-radius:12px;padding:12px}
    /* FAQ */
    .faq{display:grid;gap:10px}
    .faq details{background:#fff;border:1px solid var(--line);border-radius:10px;padding:12px}
    .faq summary{font-weight:700;cursor:pointer;list-style:none}
    .faq summary::-webkit-details-marker{display:none}
    .faq summary:after{content:"▼";float:right;transition:.2s}
    .faq details[open] summary:after{transform:rotate(180deg)}
    /* Scroll helpers */
    .scrollHint{position:fixed;left:50%;bottom:18px;transform:translateX(-50%);z-index:900;display:flex;flex-direction:column;align-items:center;gap:6px}
    .scrollHint .arrow{width:46px;height:46px;border-radius:999px;border:1px solid var(--line);background:linear-gradient(#fff,#f6f9ff);display:grid;place-items:center;box-shadow:0 8px 22px rgba(0,0,0,.08);font-weight:700;color:var(--acc);cursor:pointer;animation:bob 1.5s ease-in-out infinite}
    .scrollHint .txt{font-size:12px;color:var(--mut)}
    @keyframes bob{0%,100%{transform:translateX(-50%) translateY(0)}50%{transform:translateX(-50%) translateY(8px)}}
    /* Reveal */
    .reveal{opacity:0;transform:translateY(14px);transition:opacity .6s cubic-bezier(.22,.61,.36,1), transform .6s cubic-bezier(.22,.61,.36,1)}
    .reveal.show{opacity:1;transform:none}
    /* Progress bar */
    .progress{position:fixed;inset:0 0 auto 0;height:3px;background:linear-gradient(90deg,var(--acc),var(--acc2));transform-origin:left;transform:scaleX(0);z-index:1100}
    /* Footer */
    footer{padding:26px 0;border-top:1px solid var(--line);color:var(--mut);background:#fff}
    /* Responsive */
    @media (max-width:1100px){.grid-hero{grid-template-columns:1fr}.charts{grid-template-columns:1fr}.shots{grid-template-columns:1fr 1fr}}
    @media (max-width:768px){
      .menu{gap:6px}
      .menu a{padding:6px 8px;font-size:14px}
      .grid-2,.grid-3,.grid-4,.shots{grid-template-columns:1fr}
      .btn{width:100%}
      .shot img{height:220px}
    }
  </style>
</head>
<body>
  <!-- progress -->
  <div class="progress" id="progress"></div>

  <!-- header -->
  <header>
    <div class="container nav">
      <a href="#hero" class="brand" aria-label="NEBULA IT">
        <!-- simple mark -->
        <svg viewBox="0 0 36 36" width="36" height="36" aria-hidden="true">
          <defs><linearGradient id="g" x1="0" y1="1" x2="1" y2="0"><stop offset="0" stop-color="#2563eb"/><stop offset="1" stop-color="#0ea5e9"/></linearGradient></defs>
          <rect width="36" height="36" rx="10" fill="url(#g)"/>
          <path d="M18 9 19.8 15.2 26 17 19.8 18.8 18 25 16.2 18.8 10 17 16.2 15.2Z" fill="#0f172a"/>
          <path d="M28 22a10 10 0 1 1-6-12" fill="none" stroke="#0f172a" stroke-width="2" opacity=".4"/>
        </svg>
        NEBULA IT
      </a>
      <nav class="menu" aria-label="Главное меню">
        <a href="#hero">Главная</a>
        <a href="#services">Услуги</a>
        <a href="#solutions">Решения</a>
        <a href="#cases">Кейсы</a>
        <a href="#pricing">Пакеты</a>
        <a href="#stack">Технологии</a>
        <a href="#process">Процесс</a>
        <a href="#faq">FAQ</a>
        <a href="#contact">Контакты</a>
      </nav>
      <button class="btn primary" id="btnBriefOpen">Запустить пилот</button>
    </div>
  </header>

  <main>
    <!-- HERO -->
    <section id="hero">
      <div class="container">
        <div class="paper reveal">
          <div class="grid-hero">
            <div>
              <span class="kicker">AI · Чат-боты · Мини-приложения · Веб · Интеграции</span>
              <h1>Продукты, которые приносят деньги</h1>
              <p class="mut">Автоматизируем лидогенерацию, поддержку и продажи. Интеграции с CRM, платежами и аналитикой. Сроки и KPI в договоре.</p>
              <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px">
                <button class="btn primary" id="btnBriefOpen2">Заполнить бриф</button>
                <a class="btn outline" href="#cases">Портфолио</a>
                <a class="btn" href="#services">Услуги</a>
              </div>
            </div>
            <div class="code">
<pre><code># nebula.pipeline
stages: [lint, test, build, ship]
targets:
  web: nextjs@vercel
  api: fastapi@cloud
integrations: [crm, payments, webhooks, analytics]
slo: { uptime: '≥99.5%', p95: '&lt;300ms' }
<span class="cursor"> </span></code></pre>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- SERVICES -->
    <section id="services">
      <div class="container">
        <div class="paper reveal">
          <h2>Услуги</h2>
          <p class="mut">От стратегии до продакшена. Короткие итерации, прозрачные метрики.</p>
          <div class="grid-3" style="margin-top:12px">
            <article class="card"><h3>Веб-разработка</h3><p class="mut">Лендинги, порталы, личные кабинеты, дашборды.</p><div style="display:flex;gap:8px;margin-top:8px"><button class="btn secondary">Запросить</button><button class="btn">Подробнее</button></div></article>
            <article class="card"><h3>Чат-боты</h3><p class="mut">Telegram/WhatsApp/VK. Каталоги, оплаты, CRM.</p><div style="display:flex;gap:8px;margin-top:8px"><button class="btn secondary">Запросить</button><button class="btn">Подробнее</button></div></article>
            <article class="card"><h3>AI-ассистенты</h3><p class="mut">RAG, приватные базы, тонкая настройка моделей.</p><div style="display:flex;gap:8px;margin-top:8px"><button class="btn secondary">Запросить</button><button class="btn">Подробнее</button></div></article>
            <article class="card"><h3>Интеграции</h3><p class="mut">CRM/ERP, вебхуки, очереди, биллинг, SSO.</p><div style="display:flex;gap:8px;margin-top:8px"><button class="btn secondary">Запросить</button><button class="btn">Подробнее</button></div></article>
            <article class="card"><h3>Аналитика</h3><p class="mut">Отчётность, продуктовые метрики, BI-дашборды.</p><div style="display:flex;gap:8px;margin-top:8px"><button class="btn secondary">Запросить</button><button class="btn">Подробнее</button></div></article>
            <article class="card"><h3>Поддержка SLA</h3><p class="mut">8×5/24×7, алерты, DR-план, постмортемы.</p><div style="display:flex;gap:8px;margin-top:8px"><button class="btn secondary">Запросить</button><button class="btn">Подробнее</button></div></article>
          </div>
        </div>
      </div>
    </section>

    <!-- SOLUTIONS -->
    <section id="solutions">
      <div class="container">
        <div class="paper reveal">
          <h2>Решения</h2>
          <div class="grid-4" style="margin-top:12px">
            <div class="card"><span class="tag">Лид-бот</span><h3>Квиз + оплата</h3><p class="mut">Собирает заявку, принимает оплату, пишет в CRM.</p></div>
            <div class="card"><span class="tag">Саппорт-бот</span><h3>FAQ + оператор</h3><p class="mut">Отвечает на типовые вопросы, эскалирует диалоги.</p></div>
            <div class="card"><span class="tag">HR-бот</span><h3>Онбординг</h3><p class="mut">Высылает шаги, проверяет статусы, напоминает.</p></div>
            <div class="card"><span class="tag">Mini-app</span><h3>Каталог</h3><p class="mut">Витрина, корзина, чек-аут, электронные чеки.</p></div>
          </div>
        </div>
      </div>
    </section>

    <!-- CASES -->
    <section id="cases">
      <div class="container">
        <div class="paper reveal">
          <h2>Кейсы</h2>
          <div class="shots" style="margin-top:10px">
            <figure class="shot"><span class="lbl tag">FinTech</span><img src="https://images.unsplash.com/photo-1556157382-97eda2d62296?q=80&w=1600&auto=format&fit=crop" alt="Финтех панель"/></figure>
            <figure class="shot"><span class="lbl tag">E-commerce</span><img src="https://images.unsplash.com/photo-1460925895917-afdab827c52f?q=80&w=1600&auto=format&fit=crop" alt="Интернет-магазин"/></figure>
            <figure class="shot"><span class="lbl tag">AI Ops</span><img src="https://images.unsplash.com/photo-1518770660439-4636190af475?q=80&w=1600&auto=format&fit=crop" alt="AI операции"/></figure>
          </div>
          <div class="grid-4" style="margin-top:14px">
            <div class="card"><h3>Результат</h3><p class="mut">−38% ручных операций, +12% конверсия, p95 API 240мс.</p></div>
            <div class="card"><h3>Метрики</h3><p class="mut">DAU/MAU, активация, удержание, CAC/LTV, NPS, MTTR.</p></div>
            <div class="card"><h3>Архитектура</h3><p class="mut">Next.js · FastAPI · Postgres · Redis · очереди.</p></div>
            <div class="card"><h3>Команда</h3><p class="mut">PM, UX, 2 FE, 1 BE, Data Eng, QA. Демо еженедельно.</p></div>
          </div>
        </div>
      </div>
    </section>

    <!-- PRICING -->
    <section id="pricing">
      <div class="container">
        <div class="paper reveal">
          <h2>Пакеты</h2>
          <div class="grid-3" style="margin-top:12px">
            <div class="card"><h3>Start</h3><p class="mut">Квиз-бот или лендинг. 2–3 недели. Базовые интеграции.</p><button class="btn primary" style="margin-top:8px">Обсудить</button></div>
            <div class="card"><h3>Pro</h3><p class="mut">Бот + мини-приложение + CRM. 4–6 недель. Аналитика.</p><button class="btn primary" style="margin-top:8px">Обсудить</button></div>
            <div class="card"><h3>Enterprise</h3><p class="mut">Множественные интеграции, SSO, SLA 24×7.</p><button class="btn primary" style="margin-top:8px">Обсудить</button></div>
          </div>
          <p class="mut" style="margin-top:10px">НДС по запросу. Стоимость уточняется в брифе.</p>
        </div>
      </div>
    </section>

    <!-- STACK -->
    <section id="stack">
      <div class="container">
        <div class="paper reveal">
          <h2>Технологии и интеграции</h2>
          <p class="mut">Готовы к облаку и on-prem. Работаем с популярными CRM и платёжными шлюзами.</p>
          <div class="partners" style="margin-top:10px">
            <div class="partner" title="Next.js"><img src="https://dummyimage.com/200x36/cccccc/000.png&text=Next.js" alt="Next.js"/></div>
            <div class="partner" title="FastAPI"><img src="https://dummyimage.com/200x36/cccccc/000.png&text=FastAPI" alt="FastAPI"/></div>
            <div class="partner" title="PostgreSQL"><img src="https://dummyimage.com/200x36/cccccc/000.png&text=PostgreSQL" alt="PostgreSQL"/></div>
            <div class="partner" title="Redis"><img src="https://dummyimage.com/200x36/cccccc/000.png&text=Redis" alt="Redis"/></div>
            <div class="partner" title="ClickHouse"><img src="https://dummyimage.com/200x36/cccccc/000.png&text=ClickHouse" alt="ClickHouse"/></div>
            <div class="partner" title="amoCRM"><img src="https://dummyimage.com/200x36/cccccc/000.png&text=amoCRM" alt="amoCRM"/></div>
            <div class="partner" title="Bitrix24"><img src="https://dummyimage.com/200x36/cccccc/000.png&text=Bitrix24" alt="Bitrix24"/></div>
            <div class="partner" title="1C"><img src="https://dummyimage.com/200x36/cccccc/000.png&text=1C" alt="1C"/></div>
            <div class="partner" title="Telegram API"><img src="https://dummyimage.com/200x36/cccccc/000.png&text=Telegram+API" alt="Telegram API"/></div>
            <div class="partner" title="ЮKassa"><img src="https://dummyimage.com/200x36/cccccc/000.png&text=YooKassa" alt="YooKassa"/></div>
            <div class="partner" title="Stripe"><img src="https://dummyimage.com/200x36/cccccc/000.png&text=Stripe" alt="Stripe"/></div>
            <div class="partner" title="Webhooks"><img src="https://dummyimage.com/200x36/cccccc/000.png&text=Webhooks" alt="Webhooks"/></div>
          </div>
        </div>
      </div>
    </section>

    <!-- PROCESS + ANALYTICS -->
    <section id="process">
      <div class="container">
        <div class="paper reveal">
          <h2>Процесс и аналитика</h2>
          <div class="grid-2" style="margin-top:10px">
            <div>
              <div class="card"><strong>01 · Диагностика</strong><p class="mut">Интервью, цели, риски, KPI. Прототип-скетчи.</p></div>
              <div class="card"><strong>02 · Спринты</strong><p class="mut">Итерации 1–2 недели. Демо каждую неделю.</p></div>
              <div class="card"><strong>03 · Запуск</strong><p class="mut">Пилот, метрики эффекта, план развития.</p></div>
            </div>
            <div>
              <div class="charts">
                <div class="chart">
                  <svg id="lineChart" viewBox="0 0 600 260" width="100%" height="260" role="img" aria-label="График роста">
                    <rect x="0" y="0" width="600" height="260" fill="#fff" rx="10" ry="10" stroke="var(--line)"/>
                    <g stroke="#eef2f7"><line x1="40" x2="560" y1="50" y2="50"/><line x1="40" x2="560" y1="100" y2="100"/><line x1="40" x2="560" y1="150" y2="150"/><line x1="40" x2="560" y1="200" y2="200"/></g>
                    <polyline id="poly" fill="none" stroke="url(#grad)" stroke-width="3" points=""/>
                    <defs><linearGradient id="grad" x1="0" y1="0" x2="1" y2="0"><stop offset="0%" stop-color="#2563eb"/><stop offset="100%" stop-color="#0ea5e9"/></linearGradient></defs>
                  </svg>
                  <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-top:8px">
                    <label>A <input id="a" type="range" min="0" max="100" value="30"></label>
                    <label>B <input id="b" type="range" min="0" max="100" value="60"></label>
                    <label>C <input id="c" type="range" min="0" max="100" value="80"></label>
                    <button class="btn outline" id="btnResetCharts">Сброс</button>
                  </div>
                </div>
                <div class="chart">
                  <svg id="donut" viewBox="0 0 220 220" width="100%" height="220" aria-label="Каналы">
                    <circle cx="110" cy="110" r="80" fill="#fff" stroke="#eef2f7" stroke-width="18"/>
                    <circle id="d1" cx="110" cy="110" r="80" fill="none" stroke="#2563eb" stroke-width="18" stroke-dasharray="0 502" transform="rotate(-90 110 110)"/>
                    <circle id="d2" cx="110" cy="110" r="80" fill="none" stroke="#0ea5e9" stroke-width="18" stroke-dasharray="0 502" transform="rotate(-90 110 110)"/>
                    <circle id="d3" cx="110" cy="110" r="80" fill="none" stroke="#93c5fd" stroke-width="18" stroke-dasharray="0 502" transform="rotate(-90 110 110)"/>
                    <text id="donutLabel" x="110" y="118" text-anchor="middle" font-size="16">Каналы</text>
                  </svg>
                  <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:8px">
                    <label>Organic <input id="dn1" type="range" min="0" max="100" value="40"></label>
                    <label>Paid <input id="dn2" type="range" min="0" max="100" value="35"></label>
                    <label>Referrals <input id="dn3" type="range" min="0" max="100" value="25"></label>
                  </div>
                </div>
              </div>
              <p class="mut" style="margin-top:10px">Смещение в Organic снижает CAC, Paid ускоряет тесты, Referrals стабилизирует качество лидов.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ -->
    <section id="faq">
      <div class="container">
        <div class="paper reveal">
          <h2>FAQ</h2>
          <div class="faq" style="margin-top:10px">
            <details><summary>Сколько длится MVP?</summary><p class="mut">4–8 недель при готовом контенте и оперативных согласованиях.</p></details>
            <details><summary>Как считаете ROI?</summary><p class="mut">Фиксируем базу, считаем инкремент и вклад гипотез, строим отчёт.</p></details>
            <details><summary>Есть SLA-поддержка?</summary><p class="mut">8×5 или 24×7, время реакции от 30 минут, DR-план, постмортемы.</p></details>
            <details><summary>Кому принадлежат права?</summary><p class="mut">Исключительные права по договору. Исходники и CI/CD у клиента.</p></details>
          </div>
        </div>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="contact">
      <div class="container">
        <div class="paper reveal">
          <h2>Связаться</h2>
          <div class="grid-2" style="margin-top:10px">
            <div>
              <p class="mut">Москва · hello@example.com · t.me/nebula_it</p>
              <div style="display:flex;gap:8px;margin-top:8px;flex-wrap:wrap">
                <a class="btn" href="#">Telegram</a>
                <a class="btn" href="#">GitHub</a>
                <a class="btn" href="#">LinkedIn</a>
                <button class="btn outline" id="btnReq">Реквизиты</button>
              </div>
            </div>
            <form id="briefForm" class="card" style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
              <input name="name" placeholder="Имя*" required aria-label="Имя"/>
              <input name="email" type="email" placeholder="Email*" required aria-label="Email"/>
              <input name="company" placeholder="Компания" aria-label="Компания"/>
              <input name="phone" placeholder="Телефон" aria-label="Телефон"/>
              <textarea name="goal" placeholder="Коротко о задаче" style="grid-column:1/-1;min-height:96px"></textarea>
              <div style="display:flex;gap:10px;grid-column:1/-1;align-items:center">
                <button class="btn primary" type="submit">Отправить</button>
                <span id="formMsg" class="mut"></span>
              </div>
            </form>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- FOOTER -->
  <footer>
    <div class="container" style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
      <div>© <span id="year"></span> NEBULA IT</div>
      <div class="mut">Сделано по корпоративным стандартам. LCP &lt; 2.5 c, CLS &lt; 0.05.</div>
    </div>
  </footer>

  <!-- DOWN ARROW -->
  <div class="scrollHint" id="scrollHint">
    <button class="arrow" aria-label="Листать вниз">↓</button>
    <div class="txt">Листать</div>
  </div>

  <!-- MODAL REQUISITES -->
  <div id="modalReq" hidden style="position:fixed;inset:0;display:grid;place-items:center;background:rgba(15,23,42,.35);z-index:1200">
    <div class="paper" style="width:min(640px,92vw)">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:10px">
        <h3 style="margin:0">Реквизиты (пример)</h3>
        <button class="btn" id="btnReqClose">Закрыть</button>
      </div>
      <div style="display:grid;gap:6px;margin-top:8px">
        <div><strong>ООО «Небула Тех»</strong></div>
        <div class="mut">ИНН 7723456789 · КПП 770301001 · ОГРН 1234567890123</div>
        <div class="mut">Банк: ПАО «ТехБанк» · БИК 044525225</div>
        <div class="mut">р/с 40702810900000123456 · к/с 30101810400000000225</div>
        <div class="mut">Юр. адрес: 125000, г. Москва, ул. Пример, д. 1</div>
      </div>
    </div>
  </div>

  <script>
    // Year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Reveal on scroll
    const io = new IntersectionObserver((en)=>{
      en.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('show'); io.unobserve(e.target);} })
    },{threshold:.14});
    document.querySelectorAll('.reveal').forEach(n=>io.observe(n));

    // Active nav + progress
    const sections = Array.from(document.querySelectorAll('main > section'));
    const links = Array.from(document.querySelectorAll('.menu a'));
    const io2 = new IntersectionObserver((en)=>{
      en.forEach(e=>{
        if(!e.isIntersecting) return;
        const id = '#'+e.target.id;
        links.forEach(a=>a.classList.toggle('active', a.getAttribute('href')===id));
      })
    },{threshold:.6});
    sections.forEach(s=>io2.observe(s));
    const progress = document.getElementById('progress');
    window.addEventListener('scroll', ()=>{
      const max = document.documentElement.scrollHeight - innerHeight;
      progress.style.transform = `scaleX(${Math.max(0, Math.min(1, scrollY/max))})`;
    }, {passive:true});

    // Snap assist
    let snapTimer=null;
    function snapToNearest(){
      const vh = innerHeight;
      let best=null, bestDist=1e9;
      for(const s of sections){ const d=Math.abs(s.getBoundingClientRect().top); if(d<bestDist){best=s;bestDist=d;} }
      if(best && bestDist > vh*0.08){ best.scrollIntoView({behavior:'smooth', block:'start'}); }
    }
    addEventListener('scroll', ()=>{ clearTimeout(snapTimer); snapTimer=setTimeout(snapToNearest,120); }, {passive:true});

    // Down arrow
    const hint = document.getElementById('scrollHint');
    let slideIndex=0;
    const io3 = new IntersectionObserver((en)=>{
      en.forEach(e=>{ if(e.isIntersecting){ slideIndex = sections.indexOf(e.target); hint.style.display = (slideIndex===sections.length-1)?'none':'flex'; } })
    },{threshold:.7});
    sections.forEach(s=>io3.observe(s));
    hint.querySelector('button').addEventListener('click', ()=>{
      const next = sections[Math.min(sections.length-1, slideIndex+1)];
      next?.scrollIntoView({behavior:'smooth', block:'start'});
    });

    // Brief open
    const btnBriefOpen  = document.getElementById('btnBriefOpen');
    const btnBriefOpen2 = document.getElementById('btnBriefOpen2');
    const briefForm = document.getElementById('briefForm');
    const formMsg = document.getElementById('formMsg');
    [btnBriefOpen, btnBriefOpen2].forEach(b=>b?.addEventListener('click', ()=>{
      document.getElementById('contact').scrollIntoView({behavior:'smooth', block:'start'});
      briefForm?.querySelector('input[name="name"]')?.focus({preventScroll:true});
    }));

    // Requisites modal
    const modalReq = document.getElementById('modalReq');
    document.getElementById('btnReq')?.addEventListener('click', ()=>{ modalReq.hidden=false; });
    document.getElementById('btnReqClose')?.addEventListener('click', ()=>{ modalReq.hidden=true; });
    modalReq?.addEventListener('click', (e)=>{ if(e.target===modalReq) modalReq.hidden=true; });
    addEventListener('keydown', (e)=>{ if(e.key==='Escape') modalReq.hidden=true; });

    // Brief fake submit
    briefForm?.addEventListener('submit', async (e)=>{
      e.preventDefault();
      const data = Object.fromEntries(new FormData(briefForm).entries());
      formMsg.textContent = 'Отправка…';
      await new Promise(r=>setTimeout(r,800));
      console.log('BRIEF', data);
      formMsg.textContent = 'Готово. Мы свяжемся в течение рабочего дня.';
      briefForm.reset();
    });

    // Charts
    const a = document.getElementById('a'), b = document.getElementById('b'), c = document.getElementById('c');
    const poly = document.getElementById('poly');
    function drawLine(){
      const base = [10,30,50,70,90,110,130,150,170,190,210,230,250,270,290,310,330,350,370,390,410,430,450,470,490,510,530,550];
      const vals = [a.value, (a.value*0.6 + b.value*0.4), b.value, (b.value*0.6 + c.value*0.4), c.value, +c.value+10].slice(0,6);
      const pts = vals.map((v,i)=>`${40 + i*104},${200 - (v/100)*140}`).join(' ');
      poly.setAttribute('points', pts);
    }
    [a,b,c].forEach(el=>el?.addEventListener('input', drawLine)); drawLine();

    const donut = {total: 2*Math.PI*80, els:[
      document.getElementById('d1'),
      document.getElementById('d2'),
      document.getElementById('d3')
    ]};
    const dn1=document.getElementById('dn1'), dn2=document.getElementById('dn2'), dn3=document.getElementById('dn3'), dLabel=document.getElementById('donutLabel');
    function drawDonut(){
      const v1=+dn1.value, v2=+dn2.value, v3=+dn3.value; const sum=Math.max(1, v1+v2+v3);
      const a1 = donut.total*(v1/sum), a2 = donut.total*(v2/sum), a3 = donut.total*(v3/sum);
      donut.els[0].setAttribute('stroke-dasharray', `${a1} ${donut.total - a1}`);
      donut.els[1].setAttribute('stroke-dasharray', `${a2} ${donut.total - a2}`);
      donut.els[1].setAttribute('stroke-dashoffset', -a1);
      donut.els[2].setAttribute('stroke-dasharray', `${a3} ${donut.total - a3}`);
      donut.els[2].setAttribute('stroke-dashoffset', -(a1+a2));
      dLabel.textContent = `O:${v1}% P:${v2}% R:${v3}%`;
    }
    [dn1,dn2,dn3].forEach(el=>el?.addEventListener('input', drawDonut)); drawDonut();

    document.getElementById('btnResetCharts')?.addEventListener('click', ()=>{
      a.value=30; b.value=60; c.value=80; dn1.value=40; dn2.value=35; dn3.value=25; drawLine(); drawDonut();
    });
  </script>
</body>
</html>
